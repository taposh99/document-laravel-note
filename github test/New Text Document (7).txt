$data = Yii::app()->db->createCommand("
    SELECT DISTINCT(territory_id) as territory_id 
    FROM money_receipt mr
    WHERE $condition
    AND NOT EXISTS (
        SELECT 1 FROM cheque_clearing cc 
        WHERE cc.cheque_no = mr.cheque_no AND cc.is_dis_honored = 1
    )
")->queryAll();
$data = Yii::app()->db->createCommand("
    SELECT DISTINCT(territory_id) as territory_id 
    FROM money_receipt mr 
    WHERE $condition 
    AND NOT EXISTS (
        SELECT 1 FROM cheque_clearing cc 
        WHERE CONVERT(cc.cheque_no USING utf8) COLLATE utf8_general_ci = 
              CONVERT(mr.cheque_no USING utf8) COLLATE utf8_general_ci 
              AND cc.is_dis_honored = 1
    )
")->queryAll();


 $summaryMessage = $is_summary ? "Summary" : "";
        if ($date != "") {
            $message = "PDC Cheque List $summaryMessage Report <br> As On: $date";
            $data = Yii::app()->db->createCommand("SELECT DISTINCT(territory_id) as territory_id FROM money_receipt  where $condition AND cheque_no NOT IN (
            SELECT cheque_no FROM cheque_clearing WHERE is_dis_honored = 1
            )")->queryAll();
        } else {
            $message = "<div class='flash-error'>Please select date !</div>";
        }





       $summaryMessage = $is_summary ? "Summary" : "";
        if ($date != "") {
            $message = "PDC Cheque List $summaryMessage Report <br> As On: $date";
            $data = Yii::app()->db->createCommand("SELECT DISTINCT(territory_id) as territory_id FROM money_receipt  where $condition AND cheque_no NOT IN (
            SELECT cheque_no FROM cheque_clearing WHERE is_dis_honored = 1
            )")->queryAll();
        } else {
            $message = "<div class='flash-error'>Please select date !</div>";
        }